import{g as P,u as k}from"./updateCartCount-DBnaYKON.js";import{g as C,c as T}from"./getProductFromLS-DcypfGt_.js";import{g as S,u as f}from"./getProductFromJSON-B5AGCLPZ.js";import{s as g}from"./showToast-DYAkwBu6.js";const q=T.maxQuantity,$=(n,e)=>{const o=S(e),r=document.getElementById(`card${e}`),a=o.category;let u=r.querySelector(".productSKU").innerText,s=Number(r.querySelector(".productQuantity").innerText),d=Number(r.querySelector(".productPrice").innerText.replace("$","")),i=P(),p=0,l="";d*=s,d=Number(d.toFixed(2)),C(e,u)?(p=i.find(t=>t.id===e&&t.sku===u).quantity+s,p<=q?(d=Number((i.find(t=>t.id===e&&t.sku===u).price+d).toFixed(2)),s=i.find(t=>t.id===e&&t.sku===u).quantity+s,i.find(t=>t.id===e&&t.sku===u).price=d,i.find(t=>t.id===e&&t.sku===u).quantity=s,l=`${o.name} added to cart. <i class="fa-solid fa-check"></i>`,g(l)):(l=`${o.name} not added to cart. Selected quantity exceeds ${q}. <i class="fa-solid fa-xmark"></i>`,g(l))):(p=s,i.push({id:e,sku:u,category:a,price:d,quantity:s}),l=`${o.name} added to cart. <i class="fa-solid fa-check"></i>`,g(l)),localStorage.setItem("cart",JSON.stringify(i)),k()},v=T.maxQuantity,N=(n,e)=>{const r=document.getElementById(`card${e}`).querySelector(".productQuantity");let a=parseInt(r.getAttribute("data-quantity"))||1;n.target.className==="cartIncrement"&&a<v?a++:n.target.className==="cartDecrement"&&a>1&&a--,r.innerText=a,r.setAttribute("data-quantity",a)},h=(n,e)=>{var r=S(n).skus.find(a=>a.colour===e).id;return r},E=(n,e)=>{var o=h(n,e),r=JSON.parse(localStorage.getItem("focusedProduct"));document.querySelector(".productSKU").innerText=o,r.id=n,r.sku=o,f(r)},x=document.getElementById("productContainer"),I=document.getElementById("productTemplate"),Q=new URLSearchParams(window.location.search),b=Q.get("id"),L=n=>{var e=S(n);if(!e)return!1;var o=JSON.parse(localStorage.getItem("focusedProduct"));o.id!=e.id&&(o.id=e.id,o.sku=e.skus[0].id,f(o)),x.innerHTML="";const{id:r,name:a,category:u,brand:s,skus:d,price:i,actualPrice:p,description:l,image:y}=e,c=document.importNode(I.content,!0);c.querySelector("#cardValue").setAttribute("id",`card${r}`),c.querySelector(".productName").innerText=a,c.querySelector(".category").innerText=u,c.querySelector(".productSKU").innerText=`${o.sku}`,c.querySelector(".productDescription").innerText=l,c.querySelector(".productPrice").innerText=`$${i}`,c.querySelector(".productActualPrice").innerText=`$${p}`,y&&(c.querySelector(".productImage").src=y,c.querySelector(".productImage").alt=`${a}`),d.forEach(t=>{let m=document.createElement("option");m.value=t.colour,m.innerText=t.colour,c.querySelector(".productColour").appendChild(m)}),c.querySelector(".quantityElement").addEventListener("click",t=>{N(t,r)}),c.querySelector(".add-to-cart-button").addEventListener("click",t=>{$(t,r)}),c.querySelector(".productColour").addEventListener("change",t=>{var m=t.target.value;E(r,m)}),x.append(c)};k();L(b);window.addEventListener("beforeunload",n=>{f({})});
